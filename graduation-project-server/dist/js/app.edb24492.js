(function(e){function t(t){for(var a,l,o=t[0],i=t[1],u=t[2],d=0,m=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&m.push(s[l][0]),s[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);c&&c(t);while(m.length)m.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var i=r[o];0!==s[i]&&(a=!1)}a&&(n.splice(t--,1),e=l(l.s=r[0]))}return e}var a={},s={app:0},n=[];function l(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=a,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(r,a,function(t){return e[t]}.bind(null,a));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=i;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"0786":function(e,t,r){"use strict";r("7a54")},"0b45":function(e,t,r){},"25e0":function(e,t,r){"use strict";r("f07d")},"2ee0":function(e,t,r){},"3f8f":function(e,t,r){"use strict";r("5620")},"4d38":function(e,t,r){},"52f6":function(e,t,r){},5620:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],l={name:"app",components:{}},o=l,i=(r("034f"),r("2877")),u=Object(i["a"])(o,s,n,!1,null,null,null),c=u.exports,d=r("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_box"},[e._m(0),r("div",{staticClass:"login_from"},[r("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"iconfont icon-yonghu"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"iconfont icon-tianchongxing-"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"info"},on:{click:e.reset}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("登录")])],1)],1)],1)])])},p=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-head"},[a("img",{attrs:{src:r("7769")}})])}],g=r("1da1"),f=(r("96cf"),{name:"login",data:function(){return{form:{username:"zhoujian",password:"123321"},rules:{username:[{required:!0,message:"请输入用户名！",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}]},result:{}}},methods:{submit:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/sys/login",e.form);case 4:if(a=t.sent,s=a.data,200!==s.code||null==s.result){t.next=15;break}return window.sessionStorage.setItem("token",s.result.token),window.sessionStorage.setItem("username",s.result.user.username),t.next=11,e.$router.push("/home");case 11:return e.result=s,t.abrupt("return",e.$message.success(s.message+"欢迎回来！"));case 15:return t.abrupt("return",e.$message.error(s.message));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},reset:function(){this.$refs.loginFormRef.resetFields()}}}),b=f,h=(r("913c"),Object(i["a"])(b,m,p,!1,null,"aad63aa8",null)),v=h.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home_container"},[a("el-header",[a("div",{staticClass:"head_pic"},[a("img",{attrs:{src:r("7769")}}),a("span",[e._v("港机视频监控和远程控制界面")])]),a("el-button",{on:{click:e.logout}},[e._v("退出")])],1),a("el-container",[a("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[a("div",{staticClass:"toggle-button",on:{click:e.isCollapse_method}},[e._v("...")]),a("el-menu",{attrs:{"background-color":"#222222","text-color":"#fff","active-text-color":"#ffd04b","unique-opened":!0,collapse:e.isCollapse,"collapse-transition":!1,router:!0,"default-active":e.isActive}},e._l(e.menus,(function(t){return a("el-submenu",{key:t.id,staticStyle:{"text-align":"left"},attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{class:e.menus_icon[t.id]}),a("span",[e._v(e._s(t.menuName))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.route+""},on:{click:function(r){return e.saveActivePath(t.route)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),a("span",[e._v(e._s(t.menuName))])])],2)}))],2)})),1)],1),a("el-main",[a("router-view")],1)],1)],1)},w=[],x={created:function(){this.activePath(),this.getMenu()},name:"home",data:function(){return{menus:{},menus_icon:{1:"iconfont icon-xitongguanli",7:"iconfont icon-yuanchengkongzhi",11:"iconfont icon-shipinjiankong"},isCollapse:!1,isActive:""}},methods:{getMenu:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/sys/menu");case 2:r=t.sent,a=r.data,e.menus=a.result;case 5:case"end":return t.stop()}}),t)})))()},logout:function(){window.sessionStorage.clear(),this.$router.push("/login"),this.$message.info("已退出登录！")},isCollapse_method:function(){this.isCollapse=!this.isCollapse},saveActivePath:function(e){window.sessionStorage.setItem("activePath",e)},activePath:function(){this.isActive=window.sessionStorage.getItem("activePath")}}},k=x,F=(r("ba2f"),Object(i["a"])(k,y,w,!1,null,"a7cce094",null)),$=F.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-carousel",{attrs:{interval:4e3,type:"card",height:"200px"}},e._l(6,(function(t){return r("el-carousel-item",{key:t},[r("h3",{staticClass:"medium"},[e._v(e._s(t))])])})),1),r("el-carousel",{attrs:{interval:5e3,arrow:"always",height:"400px"}},e._l(4,(function(t){return r("el-carousel-item",{key:t},[r("h3",[e._v(e._s(t))])])})),1)],1)},D=[],R={name:"welcome"},P=R,U=(r("3f8f"),Object(i["a"])(P,_,D,!1,null,"2eb06464",null)),C=U.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("系统管理")]),r("el-breadcrumb-item",[e._v("部门管理")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"名称或描述查询",clearable:""},on:{clear:e.clearSearch},model:{value:e.queryParams.key,callback:function(t){e.$set(e.queryParams,"key",t)},expression:"queryParams.key"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchDep},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addPerm}},[e._v("添加")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.deps,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{type:"index",width:"55"}}),r("el-table-column",{attrs:{prop:"dep.name",label:"权限名称",width:"120"}}),r("el-table-column",{attrs:{prop:"dep.desc",label:"部门描述","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,(function(t){return r("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.name))])}))}}])}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"small"},on:{click:function(r){return e.editDep(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(r){return e.deleteDep(t.row.dep.id)}}}),r("el-button",{attrs:{type:"primary",icon:"el-icon-user-solid",size:"small"},on:{click:function(r){return e.searchUser(t.row.dep.id)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryParams.pageNo,"page-sizes":[1,2,4,8],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:"添加新的用户信息",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t},close:e.addDialogCancel}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.depRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("el-form-item",{attrs:{label:"部门描述",prop:"desc"}},[r("el-input",{model:{value:e.addForm.desc,callback:function(t){e.$set(e.addForm,"desc",t)},expression:"addForm.desc"}})],1),r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addForm.roleIds,callback:function(t){e.$set(e.addForm,"roleIds",t)},expression:"addForm.roleIds"}},e._l(e.rolesRes,(function(e){return r("el-option",{attrs:{label:e.roles.name,value:e.roles.id}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.addDialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addDialogTrue}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"当前部门下的",visible:e.dialogTableVisible,width:"60%"},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.userDialogClose}},[r("el-table",{attrs:{data:e.userOnDep,border:"",stripe:""}},[r("el-table-column",{attrs:{property:"role.name",label:"角色",width:"80"}}),r("el-table-column",{attrs:{property:"user.username",label:"名称",width:"150"}}),r("el-table-column",{attrs:{property:"user.phone",label:"手机号",width:"200"}}),r("el-table-column",{attrs:{property:"user.email",label:"邮箱"}})],1),r("el-pagination",{attrs:{small:"",layout:"prev, pager, next",total:e.userTotal},on:{"current-change":e.handleCurrentChangeSmall}})],1),r("el-dialog",{attrs:{title:"添加新的用户信息",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t},close:e.editDialogCancel}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.depRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"编号"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.depId,callback:function(t){e.$set(e.editForm,"depId",t)},expression:"editForm.depId"}})],1),r("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[r("el-input",{model:{value:e.editForm.depName,callback:function(t){e.$set(e.editForm,"depName",t)},expression:"editForm.depName"}})],1),r("el-form-item",{attrs:{label:"部门描述",prop:"desc"}},[r("el-input",{model:{value:e.editForm.depDesc,callback:function(t){e.$set(e.editForm,"depDesc",t)},expression:"editForm.depDesc"}})],1),r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.editForm.rolesId,callback:function(t){e.$set(e.editForm,"rolesId",t)},expression:"editForm.rolesId"}},e._l(e.rolesRes,(function(e){return r("el-option",{attrs:{label:e.roles.name,value:e.roles.id}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.editDialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editDialogTrue}},[e._v("确 定")])],1)],1)],1)},S=[],q=(r("b0c0"),r("d3b7"),r("159b"),{created:function(){this.getDeps()},name:"dep",data:function(){return{depRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],desc:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,max:300,message:"长度在 1 到 300 个字符",trigger:"blur"}]},queryParams:{key:"",pageNo:1,pageSize:8},deps:[],total:0,addDialogFormVisible:!1,addForm:{name:"",desc:"",roleIds:[]},rolesRes:[],userOnDep:[],dialogTableVisible:!1,userTotal:0,depId:"",editDialogFormVisible:!1,editForm:{depId:"",depName:"",depDesc:"",rolesId:[]},oneDepRoles:[]}},methods:{getDeps:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/sys/dep",{params:e.queryParams});case 2:if(r=t.sent,a=r.data,200!==a.code||null==a.result){t.next=10;break}e.deps=a.result.list,e.total=a.result.total,console.log(e.deps),t.next=11;break;case 10:return t.abrupt("return",e.$message.error(a.message));case 11:case"end":return t.stop()}}),t)})))()},getRoles:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/sys/role",{params:e.queryParams});case 2:if(r=t.sent,a=r.data,200!==a.code||null==a.result){t.next=8;break}e.rolesRes=a.result.list,t.next=9;break;case 8:return t.abrupt("return",e.$message.error(a.message));case 9:case"end":return t.stop()}}),t)})))()},searchDep:function(){this.getDeps()},clearSearch:function(){this.getDeps()},addPerm:function(){this.addDialogFormVisible=!0,this.getRoles()},addDialogCancel:function(){this.addDialogFormVisible=!1,this.$refs.addForm.resetFields()},addDialogTrue:function(){var e=this;this.$refs.addForm.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("信息有误"));case 2:return t.next=4,e.$http.post("/sys/dep",e.addForm);case 4:if(a=t.sent,s=a.data,200!==s.code||null==s.result){t.next=14;break}return e.$refs.addForm.resetFields(),t.next=10,e.getDeps();case 10:return e.addDialogFormVisible=!1,t.abrupt("return",e.$message.success(s.message));case 14:return t.abrupt("return",e.$message.error(s.message));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editDep:function(e){var t=this;this.editDialogFormVisible=!0,this.editForm.depId=e.dep.id,this.editForm.depName=e.dep.name,this.editForm.depDesc=e.dep.desc,this.oneDepRoles=e.roles,0!==e.roles.length&&e.roles.forEach((function(e){t.editForm.rolesId.push(e.id)})),this.getRoles()},editDialogCancel:function(){this.editForm.rolesId=[],this.editDialogFormVisible=!1},editDialogTrue:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("/sys/dep",e.editForm);case 2:if(r=t.sent,a=r.data,200!==a.code||null==a.result){t.next=12;break}return t.next=7,e.getDeps();case 7:return e.editForm.rolesId=[],e.editDialogFormVisible=!1,t.abrupt("return",e.$message.success(a.message));case 12:return t.abrupt("return",e.$message.error(a.message));case 13:case"end":return t.stop()}}),t)})))()},deleteDep:function(e){var t=this;this.$confirm("此操作将永久删除该部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("/sys/dep?id="+e);case 2:if(a=r.sent,s=a.data,200!==s.code||null==s.result){r.next=10;break}return r.next=7,t.getDeps();case 7:return r.abrupt("return",t.$message.success(s.message));case 10:return r.abrupt("return",t.$message.error(s.message));case 11:case"end":return r.stop()}}),r)})))).catch((function(){return t.$message.error("已取消删除！")}))},searchUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.queryParams.key=e,r.next=3,t.$http.get("/sys/dep/users",{params:t.queryParams});case 3:if(a=r.sent,s=a.data,200!==s.code||null==s.result){r.next=10;break}t.userOnDep=s.result.list,t.userTotal=s.result.total,r.next=11;break;case 10:return r.abrupt("return",t.$message.error(s.message));case 11:t.dialogTableVisible=!0;case 12:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryParams.pageSize=e,this.getDeps(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.queryParams.pageNo=e,this.getDeps(),console.log("当前页: ".concat(e))},handleCurrentChangeSmall:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.queryParams.pageNo=e,r.next=3,t.$http.get("/sys/dep/users",{params:t.queryParams});case 3:a=r.sent,s=a.data,t.userOnDep=s.result.list,t.userTotal=s.result.total,console.log("当前页: ".concat(e));case 8:case"end":return r.stop()}}),r)})))()},userDialogClose:function(){this.queryParams.key=""}}}),z=q,O=(r("25e0"),Object(i["a"])(z,I,S,!1,null,"779ef281",null)),T=O.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("系统管理")]),r("el-breadcrumb-item",[e._v("日志")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"操作查询",clearable:""},on:{clear:e.clearLog},model:{value:e.queryParams.key,callback:function(t){e.$set(e.queryParams,"key",t)},expression:"queryParams.key"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.findLog},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-date-picker",{attrs:{clearable:"","value-format":"yyyy-MM-dd hh:mm:ss",type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{blur:e.dataBlur},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logsList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"path",label:"路径",width:"120"}}),r("el-table-column",{attrs:{prop:"browser",label:"客户端",width:"120"}}),r("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120"}}),r("el-table-column",{attrs:{label:"操作类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["POST"===t.row.method?r("el-tag",{attrs:{size:"small",effect:"dark"}},[e._v("POST")]):e._e(),"GET"===t.row.method?r("el-tag",{attrs:{size:"small",effect:"dark",type:"success"}},[e._v("GET")]):e._e(),"PUT"===t.row.method?r("el-tag",{attrs:{size:"small",effect:"dark",type:"warning"}},[e._v("PUT")]):e._e(),"DELETE"===t.row.method?r("el-tag",{attrs:{size:"small",effect:"dark",type:"danger"}},[e._v("DELETE")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"option",label:"操作行为",width:"180"}}),r("el-table-column",{attrs:{label:"操作结果",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["200 OK"===t.row.result?r("el-tag",{attrs:{size:"small",type:"success"}},[e._v("GET")]):e._e(),"500 ERROR"===t.row.result?r("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("DELETE")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"createTime",label:"操作时间"}})],1),r("el-pagination",{attrs:{"current-page":e.queryParams.pageNo,"page-sizes":[1,2,4,8],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},j=[],N={created:function(){this.getLogs()},name:"log",data:function(){return{queryParams:{key:"",from:"",end:"",pageNo:1,pageSize:8},logsList:[],date:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]},total:0}},methods:{getLogs:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/sys/log",{params:e.queryParams});case 2:r=t.sent,a=r.data,console.log(a),e.logsList=a.result.list,e.total=a.result.total;case 7:case"end":return t.stop()}}),t)})))()},clearLog:function(){this.queryParams.key="",this.getLogs()},findLog:function(){this.getLogs()},dataBlur:function(){this.queryParams.from=this.date[0],this.queryParams.end=this.date[1],this.getLogs()},handleSizeChange:function(e){this.queryParams.pageSize=e,this.getLogs(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.queryParams.pageNo=e,this.getLogs(),console.log("当前页: ".concat(e))}}},E=N,L=(r("8d11"),Object(i["a"])(E,V,j,!1,null,"4dc10832",null)),A=L.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("系统管理")]),r("el-breadcrumb-item",[e._v("权限管理")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"权限名称查询",clearable:""},on:{clear:e.getPerms},model:{value:e.queryParams.key,callback:function(t){e.$set(e.queryParams,"key",t)},expression:"queryParams.key"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchPerm},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addPerm}},[e._v("添加")])],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"info"},on:{click:function(t){return e.toggleSelection()}}},[e._v("取消选择")])],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"danger"},on:{click:e.deletePerms}},[e._v("批量删除")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.perms,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{type:"index",width:"120"}}),r("el-table-column",{attrs:{prop:"name",label:"权限名称",width:"120"}}),r("el-table-column",{attrs:{prop:"route",label:"路由名称","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"small"},on:{click:function(r){return e.editPerm(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(r){return e.deletePerm(t.row.id)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryParams.pageNo,"page-sizes":[1,2,4,8],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:"添加权限信息",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t},close:e.addDialogCancel}},[r("el-form",{ref:"addPermForm",attrs:{model:e.perm,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"权限名称"}},[r("el-input",{model:{value:e.perm.name,callback:function(t){e.$set(e.perm,"name",t)},expression:"perm.name"}})],1),r("el-form-item",{attrs:{label:"前端路由"}},[r("el-input",{model:{value:e.perm.route,callback:function(t){e.$set(e.perm,"route",t)},expression:"perm.route"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.addDialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addDialogTrue}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"用户信息",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t},close:function(t){e.editDialogFormVisible=!1}}},[r("el-form",{ref:"editPermForm",attrs:{model:e.perm,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"编号"}},[r("el-input",{attrs:{disabled:""},model:{value:e.perm.id,callback:function(t){e.$set(e.perm,"id",t)},expression:"perm.id"}})],1),r("el-form-item",{attrs:{label:"权限名称"}},[r("el-input",{model:{value:e.perm.name,callback:function(t){e.$set(e.perm,"name",t)},expression:"perm.name"}})],1),r("el-form-item",{attrs:{label:"前端路由"}},[r("el-input",{attrs:{disabled:""},model:{value:e.perm.route,callback:function(t){e.$set(e.perm,"route",t)},expression:"perm.route"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editDialogTrue}},[e._v("确 定")])],1)],1)],1)},M=[],G={created:function(){this.getPerms()},name:"perm",data:function(){return{perms:[],perm:{},permId:{id:""},queryParams:{key:"",pageNo:1,pageSize:8},total:0,editDialogFormVisible:!1,addDialogFormVisible:!1,multipleSelection:[],permIds:{ids:[]}}},methods:{getPerms:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/sys/perm",{params:e.queryParams});case 2:r=t.sent,a=r.data,e.perms=a.result.list,e.total=a.result.total;case 6:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryParams.pageSize=e,this.getPerms(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.queryParams.pageNo=e,this.getPerms(),console.log("当前页: ".concat(e))},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},searchPerm:function(){this.getPerms()},editPerm:function(e){this.editDialogFormVisible=!0,this.perm=e},editDialogTrue:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("/sys/perm",e.perm);case 2:if(r=t.sent,a=r.data,200!==a.code||null==a.result){t.next=11;break}return e.editDialogFormVisible=!1,t.next=8,e.getPerms();case 8:return t.abrupt("return",e.$message.success(a.message));case 11:return t.abrupt("return",e.$message.error(a.message));case 12:case"end":return t.stop()}}),t)})))()},addPerm:function(){this.perm={},this.addDialogFormVisible=!0,console.log(this.multipleSelection)},addDialogCancel:function(){this.addDialogFormVisible=!1},addDialogTrue:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addDialogFormVisible=!0,t.next=3,e.$http.post("/sys/perm",e.perm);case 3:if(r=t.sent,a=r.data,200!==a.code||null==a.result){t.next=12;break}return e.addDialogFormVisible=!1,t.next=9,e.getPerms();case 9:return t.abrupt("return",e.$message.success(a.message));case 12:return t.abrupt("return",e.$message.error(a.message));case 13:case"end":return t.stop()}}),t)})))()},deletePerm:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.permId.id=e,r.next=3,t.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 3:if(a=r.sent,"confirm"!=a){r.next=18;break}return r.next=7,t.$http.delete("/sys/perm",{params:t.permId});case 7:if(s=r.sent,n=s.data,200!==n.code||null==n.result){r.next=15;break}return r.next=12,t.getPerms();case 12:return r.abrupt("return",t.$message.success(n.message));case 15:return r.abrupt("return",t.$message.error(n.message));case 16:r.next=19;break;case 18:return r.abrupt("return",t.$message.info("已取消删除！"));case 19:case"end":return r.stop()}}),r)})))()},deletePerms:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.multipleSelection){t.next=19;break}for(r=0;r<e.multipleSelection.length;r++)e.permIds.ids.push(e.multipleSelection[r].id);return a="",e.permIds.ids.forEach((function(e){a+="ids="+e+"&"})),a=a.substring(0,a.lastIndexOf("&")),t.next=7,e.$http.delete("/sys/perm/more?"+a);case 7:if(s=t.sent,n=s.data,200!==n.code||null==n.result){t.next=16;break}return e.addDialogFormVisible=!1,t.next=13,e.getPerms();case 13:return t.abrupt("return",e.$message.success(n.message));case 16:return t.abrupt("return",e.$message.error(n.message));case 17:t.next=20;break;case 19:e.$message.info("没有选择需要删除的权限！");case 20:case"end":return t.stop()}}),t)})))()}}},Z=G,J=(r("0786"),Object(i["a"])(Z,B,M,!1,null,"bdd1cc14",null)),K=J.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("系统管理")]),r("el-breadcrumb-item",[e._v("角色管理")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"名称或描述查询",clearable:""},on:{clear:e.clearSearch},model:{value:e.queryParams.key,callback:function(t){e.$set(e.queryParams,"key",t)},expression:"queryParams.key"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.rolesResult.list,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("pre",[e._v(" "),e._l(t.row.perms,(function(t){return r("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.name))])}))],2)]}}])}),r("el-table-column",{attrs:{type:"index",width:"55"}}),r("el-table-column",{attrs:{prop:"roles.name",label:"角色名称",width:"120"}}),r("el-table-column",{attrs:{label:"权限名称"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.perms,(function(t){return r("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.name))])}))}}])}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"small"},on:{click:function(r){return e.edit(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(r){return e.deleteRole(t.row.roles.id)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryParams.pageNo,"page-sizes":[1,2,4,8],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:"添加新的角色信息",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t},close:e.addDialogCancel}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.depRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("el-form-item",{attrs:{label:"权限"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addForm.permsId,callback:function(t){e.$set(e.addForm,"permsId",t)},expression:"addForm.permsId"}},e._l(e.permsResult,(function(e){return r("el-option",{attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.addDialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addDialogTrue}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑角色信息",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t},close:e.editDialogCancel}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.depRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"编号"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}})],1),r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),r("el-form-item",{attrs:{label:"权限"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.editForm.permsId,callback:function(t){e.$set(e.editForm,"permsId",t)},expression:"editForm.permsId"}},e._l(e.permsResult,(function(e){return r("el-option",{attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.editDialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editDialogTrue}},[e._v("确 定")])],1)],1)],1)},Q=[],W={created:function(){this.getRoles()},name:"role",data:function(){return{depRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],roleName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},queryParams:{key:"",pageNo:1,pageSize:8},total:0,rolesResult:{},addDialogFormVisible:!1,addForm:{name:"",permsId:[]},permsResult:[],selectedPermsId:[],editDialogFormVisible:!1,editForm:{roleId:"",roleName:"",permsId:[]}}},methods:{getRoles:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/sys/role",{params:e.queryParams});case 2:if(r=t.sent,a=r.data,200!==a.code||null==a.result){t.next=9;break}e.rolesResult=a.result,e.total=a.result.total,t.next=10;break;case 9:return t.abrupt("return",e.$message.error(a.message));case 10:case"end":return t.stop()}}),t)})))()},getPerms:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.queryParams.pageNo=0,e.queryParams.pageSize=0,t.next=4,e.$http.get("/sys/perm",{params:e.queryParams});case 4:r=t.sent,a=r.data,e.permsResult=a.result.list,e.queryParams.pageNo=1,e.queryParams.pageSize=8;case 9:case"end":return t.stop()}}),t)})))()},clearSearch:function(){this.getRoles()},search:function(){this.getRoles()},add:function(){this.addDialogFormVisible=!0,this.getPerms()},addDialogCancel:function(){this.$refs.addForm.resetFields(),this.addForm={},this.addDialogFormVisible=!1},addDialogTrue:function(){var e=this;this.$refs.addForm.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("信息有误"));case 2:return t.next=4,e.$http.post("/sys/role",e.addForm);case 4:if(a=t.sent,s=a.data,200!==s.code||null==s.result){t.next=13;break}return e.addDialogCancel(),t.next=10,e.getRoles();case 10:return t.abrupt("return",e.$message.success(s.message));case 13:return t.abrupt("return",e.$message.error(s.message));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},edit:function(e){var t=this;this.editForm.roleId=e.roles.id,this.editForm.roleName=e.roles.name,e.perms.forEach((function(e){t.editForm.permsId.push(e.id)})),this.getPerms(),this.editDialogFormVisible=!0,console.log(e)},editDialogCancel:function(){this.$refs.editForm.resetFields(),this.editForm.permsId=[],this.editDialogFormVisible=!1},editDialogTrue:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("信息有误"));case 2:return t.next=4,e.$http.put("/sys/role",e.editForm);case 4:if(a=t.sent,s=a.data,200!==s.code||null==s.result){t.next=13;break}return e.editDialogCancel(),t.next=10,e.getRoles();case 10:return t.abrupt("return",e.$message.success(s.message));case 13:return t.abrupt("return",e.$message.error(s.message));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteRole:function(e){var t=this;this.$confirm("此操作将永久删除该部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$http.delete("/sys/role",{params:{id:e}});case 3:if(a=r.sent,s=a.data,200!==s.code||null==s.result){r.next=11;break}return r.next=8,t.getRoles();case 8:return r.abrupt("return",t.$message.success(s.message));case 11:return r.abrupt("return",t.$message.error(s.message));case 12:case"end":return r.stop()}}),r)})))).catch((function(){return t.$message.error("已取消删除！")}))},handleSizeChange:function(e){this.queryParams.pageSize=e,this.getRoles(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.queryParams.pageNo=e,this.getRoles(),console.log("当前页: ".concat(e))}}},X=W,Y=(r("b327"),Object(i["a"])(X,H,Q,!1,null,"3f2da3e4",null)),ee=Y.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("系统管理")]),r("el-breadcrumb-item",[e._v("用户管理")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"手机号或用户名或邮箱或员工编号查询",clearable:""},on:{clear:e.getUserList},model:{value:e.queryParams.key,callback:function(t){e.$set(e.queryParams,"key",t)},expression:"queryParams.key"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUser},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resultUserList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"dep.name",label:"部门",width:"120"}}),r("el-table-column",{attrs:{prop:"role.name",label:"职务",width:"50"}}),r("el-table-column",{attrs:{prop:"user.username",label:"用户名",width:"120"}}),r("el-table-column",{attrs:{prop:"user.phone",label:"手机号",width:"120"}}),r("el-table-column",{attrs:{prop:"user.email",label:"邮箱",width:"180"}}),r("el-table-column",{attrs:{prop:"dep.desc",label:"部门描述"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"small"},on:{click:function(r){return e.editUser(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(r){return e.deleteUser(t.row.userId)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryParams.pageNo,"page-sizes":[1,2,4,8],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:"添加新的用户信息",visible:e.addUserDialogFormVisible},on:{"update:visible":function(t){e.addUserDialogFormVisible=t},close:e.addUserDialogCancel}},[r("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,rules:e.addUserRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"phone"}},[r("el-input",{model:{value:e.addUserForm.phone,callback:function(t){e.$set(e.addUserForm,"phone",t)},expression:"addUserForm.phone"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),r("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"部门"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.depId,callback:function(t){e.depId=t},expression:"depId"}},e._l(e.depAndRoleResult,(function(e){return r("el-option",{key:e.dep.name,attrs:{label:e.dep.name,value:e.dep.id}})})),1)],1),r("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"角色"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addUserForm.roleId,callback:function(t){e.$set(e.addUserForm,"roleId",t)},expression:"addUserForm.roleId"}},e._l(e.roles,(function(e){return r("el-option",{attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.addUserDialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUserDialogTrue}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"用户信息",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t},close:e.editUserDialogCancel}},[r("el-form",{ref:"editUserForm",attrs:{model:e.editUserForm,rules:e.addUserRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"phone"}},[r("el-input",{model:{value:e.editUserForm.phone,callback:function(t){e.$set(e.editUserForm,"phone",t)},expression:"editUserForm.phone"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),r("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"部门"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.depId,callback:function(t){e.depId=t},expression:"depId"}},e._l(e.depAndRoleResult,(function(e){return r("el-option",{key:e.dep.name,attrs:{label:e.dep.name,value:e.dep.id}})})),1)],1),r("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"角色"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addUserForm.roleId,callback:function(t){e.$set(e.addUserForm,"roleId",t)},expression:"addUserForm.roleId"}},e._l(e.roles,(function(e){return r("el-option",{attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.editUserDialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editUserDialogTrue}},[e._v("确 定")])],1)],1)],1)},re=[],ae=(r("ac1f"),r("00b4"),r("d9e2"),{created:function(){this.getUserList()},name:"user",data:function(){var e=function(e,t,r){var a=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/,s=a.test(t);s||r(new Error("请输入正确的邮箱")),r()},t=function(e,t,r){var a=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,s=a.test(t);s||r(new Error("请输入正确的手机号")),r()};return{queryParams:{key:"",pageNo:1,pageSize:8},resultUserList:[],total:0,queryDepAndRole:{key:"",pageNo:"",pageSize:""},depAndRoleResult:{},addUserDialogFormVisible:!1,addUserForm:{username:"",password:"",phone:"",email:"",depId:"",roleId:""},depId:"",roles:[],addUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:e,trigger:"blur"}]},editDialogFormVisible:!1,editUserForm:{id:"",username:"",phone:"",email:"",depId:"",roleId:""},userId:{id:""}}},methods:{getUserList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/sys/user/key",{params:e.queryParams});case 2:r=t.sent,e.resultUserList=r.data.result.list,e.total=r.data.result.total;case 5:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryParams.pageSize=e,this.getUserList(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.queryParams.pageNo=e,this.getUserList(),console.log("当前页: ".concat(e))},searchUser:function(){this.getUserList()},addUser:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addUserDialogFormVisible=!0,t.next=3,e.$http.get("/sys/dep",{params:e.queryDepAndRole});case 3:r=t.sent,a=r.data,e.depAndRoleResult=a.result,console.log(e.depAndRoleResult);case 7:case"end":return t.stop()}}),t)})))()},addUserDialogCancel:function(){this.addUserDialogFormVisible=!1,this.$refs.addUserForm.resetFields()},addUserDialogTrue:function(){var e=this;this.$refs.addUserForm.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("信息有误"));case 2:return t.next=4,e.$http.post("/sys/user",e.addUserForm);case 4:if(a=t.sent,s=a.data,200!==s.code||null==s.result){t.next=12;break}return e.addUserDialogFormVisible=!1,e.getUserList(),t.abrupt("return",e.$message.success(s.message));case 12:return t.abrupt("return",e.$message.error(s.message));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("/sys/dep",{params:t.queryDepAndRole});case 2:a=r.sent,s=a.data,t.depAndRoleResult=s.result,t.editDialogFormVisible=!0,t.editUserForm.id=e.user.id,t.editUserForm.username=e.user.username,t.editUserForm.phone=e.user.phone,t.editUserForm.email=e.user.email,t.editUserForm.depId=e.user.depId,t.depId=e.user.depId,t.editUserForm.roleId=e.user.roleId,t.addUserForm.roleId=e.user.roleId;case 14:case"end":return r.stop()}}),r)})))()},editUserDialogCancel:function(){this.$refs.editUserForm.resetFields(),this.editDialogFormVisible=!1},editUserDialogTrue:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.editUserForm.depId=e.depId,e.editUserForm.roleId=e.addUserForm.roleId,t.next=4,e.$http.put("/sys/user/modify",e.editUserForm);case 4:if(r=t.sent,a=r.data,200!==a.code||null==a.result){t.next=13;break}return e.editUserDialogCancel(),t.next=10,e.getUserList();case 10:return t.abrupt("return",e.$message.success(a.message));case 13:return e.editUserDialogCancel(),t.abrupt("return",e.$message.error(a.message));case 15:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){var t=this;this.userId.id=e,this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.delete("/sys/user",{params:t.userId});case 2:if(r=e.sent,a=r.data,200!==a.code||null==a.result){e.next=10;break}return e.next=7,t.getUserList();case 7:return e.abrupt("return",t.$message.success(a.message));case 10:return e.abrupt("return",t.$message.error(a.message));case 11:case"end":return e.stop()}}),e)})))).catch((function(){return t.$message.error("已取消删除！")}))}},watch:{depId:function(e){console.log(e),this.addUserForm.depId=e;for(var t=0;t<this.depAndRoleResult.length;t++)this.depAndRoleResult[t].dep.id===e&&(0!=this.depAndRoleResult[t].roles.length?this.roles=this.depAndRoleResult[t].roles:(this.roles=[],this.addUserForm.roleId=""))}}}),se=ae,ne=(r("6718"),Object(i["a"])(se,te,re,!1,null,"1f9a034c",null)),le=ne.exports;a["default"].use(d["a"]);var oe=[{path:"/",redirect:"/login"},{path:"/login",component:v},{path:"/home",component:$,redirect:"/welcome",children:[{path:"/welcome",component:C},{path:"/user",component:le},{path:"/dep",component:T},{path:"/role",component:ee},{path:"/perm",component:K},{path:"/log",component:A}]}],ie=new d["a"]({routes:oe});ie.beforeEach((function(e,t,r){if("/login"===e.path)return r();var a=window.sessionStorage.getItem("token");if(!a)return r("/login");r()}));var ue=ie,ce=(r("9e1f"),r("450d"),r("6ed5")),de=r.n(ce),me=(r("0fb7"),r("f529")),pe=r.n(me),ge=(r("f4f9"),r("c2cc")),fe=r.n(ge),be=(r("7a0f"),r("0f6c")),he=r.n(be),ve=(r("b8e0"),r("a4c4")),ye=r.n(ve),we=(r("b84d"),r("c216")),xe=r.n(we),ke=(r("8f24"),r("76b9")),Fe=r.n(ke),$e=(r("ce18"),r("f58e")),_e=r.n($e),De=(r("8bd8"),r("4cb2")),Re=r.n(De),Pe=(r("4ca3"),r("443e")),Ue=r.n(Pe),Ce=(r("adec"),r("3d2d")),Ie=r.n(Ce),Se=(r("de31"),r("c69e")),qe=r.n(Se),ze=(r("a769"),r("5cc3")),Oe=r.n(ze),Te=(r("a673"),r("7b31")),Ve=r.n(Te),je=(r("10cb"),r("f3ad")),Ne=r.n(je),Ee=(r("eca7"),r("3787")),Le=r.n(Ee),Ae=(r("425f"),r("4105")),Be=r.n(Ae),Me=(r("1951"),r("eedf")),Ge=r.n(Me),Ze=(r("38a0"),r("ad41")),Je=r.n(Ze),Ke=(r("5466"),r("ecdf")),He=r.n(Ke),Qe=(r("672e"),r("101e")),We=r.n(Qe),Xe=(r("96dc"),r("9cea")),Ye=r.n(Xe),et=(r("186a"),r("301f")),tt=r.n(et),rt=(r("6611"),r("e772")),at=r.n(rt),st=(r("a7cc"),r("df33")),nt=r.n(st),lt=(r("1f1a"),r("4e4b")),ot=r.n(lt),it=(r("cbb5"),r("8bbc")),ut=r.n(it),ct=(r("826b"),r("c263")),dt=r.n(ct);a["default"].use(dt.a),a["default"].use(ut.a),a["default"].use(ot.a),a["default"].use(nt.a),a["default"].use(at.a),a["default"].use(tt.a),a["default"].use(Ye.a),a["default"].use(We.a),a["default"].use(He.a),a["default"].use(Je.a),a["default"].use(Ge.a),a["default"].use(Be.a),a["default"].use(Le.a),a["default"].use(Ne.a),a["default"].use(Ve.a),a["default"].use(Oe.a),a["default"].use(qe.a),a["default"].use(Ie.a),a["default"].use(Ue.a),a["default"].use(Re.a),a["default"].use(_e.a),a["default"].use(Fe.a),a["default"].use(xe.a),a["default"].use(ye.a),a["default"].use(he.a),a["default"].use(fe.a),a["default"].prototype.$message=pe.a,a["default"].prototype.$confirm=de.a.confirm;r("2ee0"),r("86f9");var mt=r("bc3a"),pt=r.n(mt);r("52f6");pt.a.interceptors.request.use((function(e){return e.headers.token=window.sessionStorage.getItem("token"),e.headers.username=window.sessionStorage.getItem("username"),e})),a["default"].prototype.$http=pt.a,pt.a.defaults.baseURL="http://localhost",a["default"].config.productionTip=!1,new a["default"]({router:ue,render:function(e){return e(c)}}).$mount("#app")},6718:function(e,t,r){"use strict";r("0b45")},7526:function(e,t,r){},7769:function(e,t,r){e.exports=r.p+"img/pig1.e2530513.png"},"7a54":function(e,t,r){},"85ec":function(e,t,r){},"86f9":function(e,t,r){},"8d11":function(e,t,r){"use strict";r("4d38")},"913c":function(e,t,r){"use strict";r("9615")},9615:function(e,t,r){},b327:function(e,t,r){"use strict";r("bf73")},ba2f:function(e,t,r){"use strict";r("7526")},bf73:function(e,t,r){},f07d:function(e,t,r){}});
//# sourceMappingURL=app.edb24492.js.map